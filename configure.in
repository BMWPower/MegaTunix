dnl Process this file with autoconf to produce a configure script.
AC_INIT(configure.in)

MEGATUNIX_LIN_MAJOR_VERSION=0
MEGATUNIX_LIN_MINOR_VERSION=1
MEGATUNIX_LIN_MICRO_VERSION=25

MEGATUNIX_LIN_VERSION=$MEGATUNIX_LIN_MAJOR_VERSION.$MEGATUNIX_LIN_MINOR_VERSION.$MEGATUNIX_LIN_MICRO_VERSION

AM_INIT_AUTOMAKE(megatunix, ${MEGATUNIX_LIN_VERSION})

AM_CONFIG_HEADER(config.h)
AM_MAINTAINER_MODE



dnl Checks for programs.
dnl AM_PROG_LIBTOOL
AC_PROG_AWK
AC_PROG_INSTALL
AC_PROG_LN_S
AC_PROG_CC
AC_PROG_MAKE_SET

dnl check paths for necessary files
pkg_modules="gtk+-2.0 gthread-2.0 "
PKG_CHECK_MODULES(PACKAGE, [$pkg_modules])
AC_SUBST(PACKAGE_CFLAGS)
AC_SUBST(PACKAGE_LIBS)

#AM_PATH_GTK(1.2.0, , AC_MSG_ERROR([** GTK 1.2.0 not installed or broken **]),gthread)
#AM_PATH_GLIB(1.2.0, , AC_MSG_ERROR([** GLIB 1.2.0 not installed or broken **]),gthread)


dnl Checks for libraries.


dnl Replace `main' with a function in -lpthread:
AC_CHECK_LIB(pthread, main)

dnl Checks for header files.
AC_HEADER_STDC
AC_CHECK_HEADERS(fcntl.h sys/ioctl.h sys/time.h unistd.h pthread.h)



dnl Checks for typedefs, structures, and compiler characteristics.
AC_HEADER_TIME

dnl Checks for library functions.

dnl optimizations

CFLAGS="-O2"
AC_SUBST(CFLAGS)

EXTRA_LIBS=""
AC_SUBST(EXTRA_LIBS)

dnl ===============
dnl Debugging stuff
dnl ===============

dnl General Debugging code
AC_ARG_ENABLE(debug,
[  --enable-debug         enable debugging [default=no]],, enable_debug=no)

if test "$enable_debug" = yes; then
DFLAGS="$DFLAGS -g -DDEBUG"
fi
AC_SUBST(DFLAGS)

dnl ==============
dnl profiling
dnl =============

AC_ARG_ENABLE(profiling,
[  --enable-profiling     enable profiling ],, enable_profiling=no)

if test "$enable_profiling" = yes; then
PFLAGS="-pg"
fi
AC_SUBST(PFLAGS)

dnl ==============
dnl Output files for build
dnl ==============

AC_SUBST(MEGATUNIX_LIN_MAJOR_VERSION)
AC_SUBST(MEGATUNIX_LIN_MINOR_VERSION)
AC_SUBST(MEGATUNIX_LIN_MICRO_VERSION)
AC_SUBST(MEGATUNIX_LIN_VERSION)
AC_OUTPUT([
Makefile 
src/Makefile
VERSION])

echo "
Configuration:

    Install Path:                       ${prefix}
    General Debugging:                  ${enable_debug}
    Profiling:                          ${enable_profiling}
"
